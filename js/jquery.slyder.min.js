(function(d,k){"function"!==typeof Object.create&&(Object.create=function(a){function c(){}c.prototype=a;return new c});d.plugin=function(a,c){d.fn[a]=function(b){return this.each(function(){d.data(this,a)||d.data(this,a,Object.create(c).init(b,this))})}};d.plugin("slyder",{init:function(a,c){var b=this;b.config=d.extend({},b.defaults,a);b.elem=c;b.$elem=d(c);b.linkList=b.$elem.find("a");b.$elem.empty().hide();d.when(b.build()).then(function(){b.config.autoStart&&(b.autoStart=k.setInterval(function(){b.auto()},
b.config.speedAuto));b.events()},function(){alert("Error: Gallery failed to load.")});return b},defaults:{animationRandom:!0,animationType:!1,autoStart:!0,classActive:"sly-active",classActiveThumb:"sly-active-thumb",classClone:"sly-clone",classCtn:"sly-ctn",classCtrl:"sly-ctrl",classPrev:"sly-prev",classNext:"sly-next",classImg:"sly-img",classThumbs:"sly-thumbs",classTxt:"sly-txt",html5:!0,imgClick:!1,imgSrc:!1,preloadAll:!1,render:!1,resolution:1.777,responsive:!1,speedAuto:3E3,speedLoad:300,speedTransition:500},
build:function(){var a=this,c=d.Deferred();d.when(a.render()).then(function(){a.$elem.show();a.settings();a.$elem.hide();a.$elem.fadeIn(a.config.speedLoad,function(){c.resolve()})},function(){c.reject()});return c.promise()},settings:function(){this.config.imgWidth=this.modules.img.width();this.config.imgHeight=this.config.responsive?this.config.imgWidth/this.config.resolution:this.modules.img.height();this.modules.img.find("img").css({height:this.config.imgHeight,width:this.config.imgWidth});this.config.responsive&&
this.eventResponsiveResize();this.modules.thumbs&&(this.config.thumbsWidth=this.modules.thumbs.width(),this.config.thumbsListWidth=this.modules.thumbs.find("ul").width())},events:function(){var a=this;a.modules.img.on("click",function(c){a.eventImgClick();c.preventDefault()});if(a.config.responsive)d(k).on("resize",function(){a.eventResponsiveResize()});a.modules.thumbs&&(a.modules.thumbs.on("click","li a",function(c){a.eventThumbClick(d(this));c.preventDefault()}),a.modules.thumbs.on("mousemove",
function(c){a.eventThumbMouseMove(this,c.pageX-d(this).offset().left);c.preventDefault()}));if(a.modules.ctrlPrev)a.modules.ctrlPrev.on("click",function(c){a.prevThumb();c.preventDefault()});if(a.modules.ctrlNext)a.modules.ctrlNext.on("click",function(c){a.nextThumb();c.preventDefault()})},eventImgClick:function(){"link"===this.config.imgClick&&(k.location=this.modules.activeThumb.find("img").attr("rel"))},eventResponsiveResize:function(){this.config.imgWidth=this.modules.img.width();this.config.imgHeight=
this.config.imgWidth/this.config.resolution;this.modules.img.find("img").css({height:this.config.imgHeight,width:this.config.imgWidth});this.config.responsive&&(this.modules.img.height(this.config.imgHeight),this.modules.ctrlPrev&&this.modules.ctrlPrev.height(this.config.imgHeight),this.modules.ctrlNext&&this.modules.ctrlNext.height(this.config.imgHeight))},eventThumbClick:function(a){this.modules.activeThumb=a;this.modules.thumbs.find("a").removeClass(this.config.classActiveThumb);this.modules.activeThumb.addClass(this.config.classActiveThumb);
this.transition()},eventThumbMouseMove:function(a,c){var b=this.modules.thumbs.find("ul"),e,h;h=parseInt(d(b).find("li").last().css("margin-right"),10);e=this.config.thumbsListWidth-this.config.thumbsWidth;h&&(e-=h);e=((c/this.config.thumbsWidth).toFixed(3)*e).toFixed(3);b.css({left:"-"+e+"px"})},prevThumb:function(){var a;this.modules.thumbs?(a=this.utils.findPrevious(this.modules.thumbs,this.modules.activeThumb),this.modules.activeThumb=a,this.modules.thumbs.find("a").removeClass(this.config.classActiveThumb),
this.modules.activeThumb.addClass(this.config.classActiveThumb)):(a=this.utils.findPreviousImage(this.modules.active,this.linkList),this.modules.activeThumb=a);this.transition()},nextThumb:function(){var a;this.modules.thumbs?(a=this.utils.findNext(this.modules.thumbs,this.modules.activeThumb),this.modules.activeThumb=a,this.modules.thumbs.find("a").removeClass(this.config.classActiveThumb),this.modules.activeThumb.addClass(this.config.classActiveThumb)):(a=this.utils.findNextImage(this.modules.active,
this.linkList),this.modules.activeThumb=a);this.transition()},auto:function(){this.nextThumb()},render:function(){var a=[],c=d.Deferred();this.modules={};a.push(this.renderContainer());"minimal"===this.config.render?(a.push(this.renderControls()),a.push(this.renderImage())):"defaultTop"===this.config.render?(a.push(this.renderThumbs()),a.push(this.renderText()),a.push(this.renderControls()),a.push(this.renderImage())):(a.push(this.renderControls()),a.push(this.renderImage()),a.push(this.renderText()),
a.push(this.renderThumbs()));d.when.apply(this,a).then(function(){c.resolve()},function(){c.reject()});return c.promise()},renderContainer:function(){this.modules.ctn=this.config.html5?d("<section>"):d("<div>");this.modules.ctn.attr({"class":this.config.classCtn});this.$elem.append(this.modules.ctn)},renderControls:function(){this.modules.ctrl=this.config.html5?d("<section>"):d("<div>");this.modules.ctrl.attr({"class":this.config.classCtrl});this.modules.ctrlPrev=d("<div>",{"class":this.config.classPrev});
this.modules.ctrlNext=d("<div>",{"class":this.config.classNext});this.modules.ctrl.append(this.modules.ctrlPrev);this.modules.ctrl.append(this.modules.ctrlNext);this.modules.ctn.append(this.modules.ctrl)},renderImage:function(){var a=this,c=d.Deferred(),b,e;a.modules.img=a.config.html5?d("<section>"):d("<div>");a.modules.img.attr({"class":a.config.classImg});a.modules.ctn.append(a.modules.img);e=a.config.imgSrc?a.config.imgSrc:d(a.linkList[0]).attr("href");a.utils.preload(e).done(function(){b=d("<img/>",
{"class":a.config.classActive,src:e});a.modules.active=b;a.modules.img.append(b);if(a.config.preloadAll){var h=[],g,f;g=0;for(f=a.linkList.length;g<f;++g)h.push(d(a.linkList[g]).find("img").attr("src")),a.utils.preload(h).done(function(){c.resolve()})}else c.resolve()});return c.promise()},renderText:function(){var a;a=this.utils.findLink(this.config.imgSrc,this.linkList);a=d(a).attr("title");this.modules.txt=this.config.html5?d("<section>"):d("<div>");this.modules.txt.attr({alt:a,"class":this.config.classTxt,
title:a}).html(a);this.modules.ctn.append(this.modules.txt)},renderThumbs:function(){var a=this,c=d.Deferred(),b,e,h=[],g;a.modules.thumbs=a.config.html5?d("<nav>"):d("<div>");a.modules.thumbs.attr({"class":a.config.classThumbs});a.modules.ctn.append(a.modules.thumbs);b=d("<ul>");var f,j;f=0;for(j=a.linkList.length;f<j;++f)e=d("<li>"),e.append(a.linkList[f]),b.append(e),h.push(d(a.linkList[f]).find("img").attr("src"));a.utils.preload(h).done(function(){a.modules.thumbs.append(b);a.utils.setListWidth(b);
g=a.config.imgSrc?a.utils.findLink(a.config.imgSrc,a.linkList):a.linkList[0];a.modules.activeThumb=d(g);d(g).addClass(a.config.classActiveThumb);c.resolve()});return c.promise()},transition:function(){var a=this,c=a.modules.active.attr("src"),b=a.modules.activeThumb.attr("href"),e=a.modules.activeThumb.attr("title"),h;c!==b&&(a.config.autoStart&&k.clearInterval(a.autoStart),a.modules.txt&&a.modules.txt.html(e),(!a.animating||"pending"!==a.animating.state())&&a.utils.preload(b).done(function(){h=a.modules.active.clone();
h.attr({src:b});h.removeClass(a.config.classActive);a.modules.img.append(h);a.modules.next=h;d.when(a.animation()).done(function(){a.modules.active.remove();a.modules.next.addClass(a.config.classActive);a.modules.active=a.modules.next;a.config.autoStart&&(a.autoStart=k.setInterval(function(){a.auto()},a.config.speedAuto));a.transition()})}))},animation:function(){var a;this.animating=d.Deferred();if(this.config.animationRandom){animationFunctions=[this.animationBlindsLeft,this.animationBlindsTop,
this.animationFade,this.animationFadeBars,this.animationSlideBarsDown,this.animationSlideBarsLeft,this.animationSlideBarsUp];for(a=animationFunctions[Math.floor(Math.random()*animationFunctions.length)];a===this.currentAnimation;)a=animationFunctions[Math.floor(Math.random()*animationFunctions.length)];this.currentAnimation=a;a.call(this)}else switch(this.config.animationType){case "blindsLeft":this.animationBlindsLeft();break;case "blindsTop":this.animationBlindsTop();break;case "fade":this.animationFade();
break;case "fadeBars":this.animationFadeBars();break;case "slideBarsDown":this.animationSlideBarsDown();break;case "slideBarsLeft":this.animationSlideBarsLeft();break;case "slideBarsUp":this.animationSlideBarsUp();break;default:this.animationFade()}return this.animating.promise()},animationBlindsLeft:function(){var a=this,c=Math.ceil(this.config.imgWidth/10),b=this.config.imgHeight,e="+="+c,h,g,f;for(f=0;10>f;++f){h=c*f;g=-(c*f);var j=d("<div/>",{"class":this.config.classClone}).append(this.modules.active.clone());
j.css({left:h,top:0,height:b,width:c});j.find("img").css({left:g,top:0});j.appendTo(this.modules.img);delay=f*this.config.speedTransition/10;9===f?j.delay(delay).animate({left:e,width:0},this.config.speedTransition,function(){d(this).remove();a.animating.resolve()}):j.delay(delay).animate({left:e,width:0},this.config.speedTransition,function(){d(this).remove()})}this.modules.active.remove()},animationBlindsTop:function(){var a=this,c=Math.ceil(this.config.imgWidth),b=Math.ceil(this.config.imgHeight/
15),e="+="+b,h,g,f;for(f=0;15>f;++f){h=b*f;g=-(b*f);var j=d("<div/>",{"class":this.config.classClone}).append(this.modules.active.clone());j.css({left:0,top:h,height:b,width:c});j.find("img").css({left:0,top:g});j.appendTo(this.modules.img);delay=f*this.config.speedTransition/15;14===f?j.delay(delay).animate({top:e,height:0},this.config.speedTransition,function(){d(this).remove();a.animating.resolve()}):j.delay(delay).animate({top:e,height:0},this.config.speedTransition,function(){d(this).remove()})}this.modules.active.remove()},
animationFade:function(){var a=this;a.modules.active.fadeOut(a.config.speedTransition,function(){a.animating.resolve()})},animationFadeBars:function(){var a=this,c=Math.ceil(this.config.imgWidth/10),b=this.config.imgHeight,e,h,g;for(g=0;10>g;++g){e=c*g;h=-(c*g);var f=d("<div/>",{"class":this.config.classClone}).append(this.modules.active.clone());f.css({left:e,top:0,height:b,width:c});f.find("img").css({left:h,top:0});f.appendTo(this.modules.img);delay=g*this.config.speedTransition/10;9===g?f.delay(delay).fadeOut(this.config.speedTransition,
function(){d(this).remove();a.animating.resolve()}):f.delay(delay).fadeOut(this.config.speedTransition,function(){d(this).remove()})}this.modules.active.remove()},animationSlideBarsDown:function(){var a=this,c=Math.ceil(this.config.imgWidth/10),b=this.config.imgHeight,e,h,g;for(g=0;10>g;++g){e=c*g;h=-(c*g);var f=d("<div/>",{"class":this.config.classClone}).append(this.modules.active.clone());f.css({left:e,top:0,height:b,width:c});f.find("img").css({left:h,top:0});f.appendTo(this.modules.img);delay=
g*this.config.speedTransition/10;9===g?f.delay(delay).animate({top:b,opacity:0.5},this.config.speedTransition,function(){d(this).remove();a.animating.resolve()}):f.delay(delay).animate({top:b,opacity:0.5},this.config.speedTransition,function(){d(this).remove()})}this.modules.active.remove()},animationSlideBarsLeft:function(){var a=this,c=Math.ceil(this.config.imgWidth),b=Math.ceil(this.config.imgHeight/15),e,h,g;for(g=0;15>g;++g){e=b*g;h=-(b*g);var f=d("<div/>",{"class":this.config.classClone}).append(this.modules.active.clone());
f.css({left:0,top:e,height:b,width:c});f.find("img").css({left:0,top:h});f.appendTo(this.modules.img);delay=g*this.config.speedTransition/15;14===g?f.delay(delay).animate({left:"-"+c,opacity:0},this.config.speedTransition,function(){d(this).remove();a.animating.resolve()}):f.delay(delay).animate({left:"-"+c,opacity:0},this.config.speedTransition,function(){d(this).remove()})}this.modules.active.remove()},animationSlideBarsUp:function(){var a=this,c=Math.ceil(this.config.imgWidth/5),b=this.config.imgHeight,
e=0,h,g,f,j;for(j=0;5>j;++j)e=j*a.config.speedTransition/5,g=c*j,f=-(c*j),h=d("<div/>",{"class":a.config.classClone}).append(a.modules.active.clone()),h.css({left:g,top:0,height:b,width:c}),h.find("img").css({left:f,top:0}),h.appendTo(a.modules.img),4===j?h.delay(e).animate({top:"-"+b,opacity:0.5},a.config.speedTransition,function(){d(this).remove();a.animating.resolve()}):h.delay(e).animate({top:"-"+b,opacity:0.5},a.config.speedTransition,function(){d(this).remove()});this.modules.active.remove()},
utils:{findLink:function(a,c){var b,e;a||(a=d(c[0]).attr("href"));b=0;for(e=c.length;b<e;++b)if(a===d(c[b]).attr("href"))return c[b]},findLinkWithImage:function(a,c){var b,e;a||d(c[0]).attr("href");b=0;for(e=c.length;b<e;++b)if(a===d(c[b]).attr("href"))return c[b]},findNext:function(a,c){var b=c.parent().next().find("a");b.length||(b=a.find("a").eq(0));return b},findNextImage:function(a,c){var b,e;b=0;for(e=c.length;b<e;++b)if(a.attr("src")===d(c[b]).attr("href"))return e===b+1?d(c[0]):d(c[b+1])},
findPrevious:function(a,c){var b=c.parent().prev().find("a");b.length||(b=a.find("a").last());return b},findPreviousImage:function(a,c){var b,e;b=0;for(e=c.length;b<e;++b)if(a.attr("src")===d(c[b]).attr("href"))return 0===b?d(c[e-1]):d(c[b-1])},preload:function(a){var c=d.Deferred(),b=[],e,h,g;d.isArray(a)||(a=[a]);h=a.length;for(var f=0;f<h;f++)g=d.Deferred(),e=d("<img />"),e.load(g.resolve),e.error(g.resolve),b.push(g),e.get(0).src=a[f];d.when.apply(this,b).done(c.resolve);return c.promise()},setListWidth:function(a){var c,
b=d(a),e=b.find("li"),h=0;a=0;for(c=e.length;a<c;++a)h+=d(e[a]).outerWidth(!0);b.css("width",h)}}})})(jQuery,window,document);